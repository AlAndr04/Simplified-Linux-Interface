package dirCommands;
import input.Output;
import java.util.Arrays;
import driver.JShell;
import fileSystemObjects.*;
public class Grep extends Commands<String> {
  private String[] dirArray;
  private String search;
  public Grep(String[] dir) {
    this.dirArray = Arrays.copyOfRange(dir, 1, dir.length);
    this.search = dir[0];
  }
  public String execute() {
    String output = null;
    String[] content;
    FSElement file;
    for (String fileName: dirArray) {
      file = Traverse.accessFS(fileName, JShell.root);
      if (file instanceof File) {
        if (output == null) {
          output = "";
        }
        output += fileName + ": \n";
        content = ((File) file).getContent().split("\\r?\\n");
        for (String line: content) {
          if (line.contains(this.search)) {
            output += line + "\n";
          }
        }
      }
      output += "\n";
    }
    output = output.substring(0, output.length() -2);
    return output;
  }
}
