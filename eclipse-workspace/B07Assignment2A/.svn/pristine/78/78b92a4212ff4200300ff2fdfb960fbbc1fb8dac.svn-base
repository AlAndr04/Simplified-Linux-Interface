package dirCommands;

import fileSystemObjects.*;
import input.Location;
import input.Output;
import input.PathIncorrectException;
import java.util.Arrays;
import driver.JShell;

public class Mv extends Commands<Void> {
  private FSElement src;
  private Directory dest;
  private String srcname;

  public Mv(String[] input, Location loc) {
    this.src = Traverse.accessFS(input[0], loc.getRoot());
    this.dest = (Directory) Traverse.accessFS(input[1], loc.getRoot());
    this.srcname = input[1];
  }

  public Void execute() {
    if ((src != null) && (this.dest != null)) {
      Directory temp = (Directory) dest.getParent();
      while ((temp != null) && (temp != src)) {
        temp = (Directory) temp.getParent();
      }
      if (temp != null) {
        Output.NoMoveInDirectory();
      } else {
        this.src.removeFromParentRef();
        src.setParent(dest);
        dest.addToChildDir(src);
      }
    } else {
      if (this.dest == null) {
        Output.directoryFileNameInvalid();
      }
      if (this.src == null) {
        Output.pathIncorrect(this.srcname);
      }
    }
    return null;
  }

}
